<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Firefox Browser UI</title>
    
    <!-- Replace favicon with inline SVG of the browser logo -->
    <link rel="icon" type="image/png" href="/85d32b57-e47e-4306-aa45-33394b770c89.png">
    
    <link rel="stylesheet" href="styles.css">
    <script type="importmap">
        {
            "imports": {
                "vue": "https://unpkg.com/vue@3/dist/vue.esm-browser.js"
            }
        }
    </script>
    <script type="module" src="app.js" defer></script>
    <style>
        .landing-page {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: 1000;
            display: flex;
            background-color: #2B2A33;
            color: #FBFBFE;
            align-items: center;
            justify-content: center;
            text-align: center;
            padding: 20px;
            overflow: auto;
        }

        .landing-content {
            max-width: 800px;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        .landing-logo {
            width: 150px;
            height: 150px;
            object-fit: contain;
            margin-bottom: 30px;
        }

        .landing-title {
            font-size: 3rem;
            margin-bottom: 20px;
            font-weight: bold;
        }

        .landing-description {
            font-size: 1.2rem;
            margin-bottom: 40px;
            max-width: 600px;
            line-height: 1.6;
        }

        .start-browser-btn {
            background-color: #0A84FF;
            color: white;
            border: none;
            padding: 15px 30px;
            font-size: 1.2rem;
            border-radius: 30px;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }

        .start-browser-btn:hover {
            background-color: #0A64CC;
        }

        .privacy-features {
            display: flex;
            justify-content: space-around;
            margin-top: 50px;
            width: 100%;
        }

        .feature {
            display: flex;
            flex-direction: column;
            align-items: center;
            max-width: 250px;
        }

        .feature-icon {
            width: 60px;
            height: 60px;
            background-color: #42414D;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 15px;
        }

        .feature-title {
            font-size: 1.1rem;
            margin-bottom: 10px;
            font-weight: bold;
        }

        .feature-description {
            text-align: center;
            font-size: 0.9rem;
            color: #C0C0C0;
        }

        /* Menu dropdown styles */
        .browser-menu-dropdown {
            position: absolute;
            top: 50px;
            right: 10px;
            background-color: #42414D;
            border-radius: 8px;
            box-shadow: 0 4px 6px rgba(0,0,0,0.1);
            z-index: 1000;
            width: 250px;
            padding: 10px;
            color: #FBFBFE;
        }

        .menu-dropdown-section {
            margin-bottom: 10px;
        }

        .menu-dropdown-section-title {
            font-weight: bold;
            font-size: 1.1rem;
            margin-bottom: 5px;
        }

        .menu-dropdown-item {
            display: flex;
            align-items: center;
            padding: 10px;
            cursor: pointer;
            border-radius: 4px;
            transition: background-color 0.2s;
        }

        .menu-dropdown-item:hover {
            background-color: rgba(255,255,255,0.1);
        }

        .menu-dropdown-item-icon {
            margin-right: 10px;
            font-size: 20px;
        }

        .menu-dropdown-item-text {
            flex-grow: 1;
        }

        .achievement-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .achievement-icon {
            margin-right: 10px;
            font-size: 20px;
        }

        .achievement-details {
            flex-grow: 1;
        }

        .achievement-title {
            font-size: 1rem;
            margin-bottom: 5px;
        }

        .achievement-progress {
            flex-grow: 1;
            height: 8px;
            background-color: #38383D;
            border-radius: 4px;
            overflow: hidden;
        }

        .achievement-progress-bar {
            height: 100%;
            background-color: #0A84FF;
            transition: width 0.3s ease;
        }

        /* Custom Context Menu Styles */
        .custom-context-menu {
            position: fixed;
            background-color: #42414D;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.2);
            z-index: 1000;
            color: #FBFBFE;
            width: 250px;
            padding: 8px 0;
            display: none;
        }

        .context-menu-item {
            display: flex;
            align-items: center;
            padding: 10px 15px;
            cursor: pointer;
            transition: background-color 0.2s;
        }

        .context-menu-item:hover {
            background-color: rgba(255,255,255,0.1);
        }

        .context-menu-item-icon {
            margin-right: 10px;
            width: 20px;
            height: 20px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .context-menu-item-text {
            flex-grow: 1;
        }

        .context-menu-divider {
            height: 1px;
            background-color: rgba(255,255,255,0.1);
            margin: 8px 0;
        }
    </style>
</head>
<body>
    <div id="app">
        <div v-if="showLandingPage" class="landing-page">
            <div class="landing-content">
                <img src="/85d32b57-e47e-4306-aa45-33394b770c89.png" alt="Browser Logo" class="landing-logo">
                <h1 class="landing-title">Browse Better, Stay Private</h1>
                <p class="landing-description">
                    Experience a browser that puts your privacy first. Fast, secure, and designed to protect you from trackers and invasive ads.
                </p>
                <button class="start-browser-btn" @click="startBrowser">Start Using Our Browser</button>
                
                <div class="privacy-features">
                    <div class="feature">
                        <div class="feature-icon">üïµÔ∏è</div>
                        <h3 class="feature-title">Total Privacy</h3>
                        <p class="feature-description">No tracking, no data selling. Your browsing history stays yours.</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">üöÄ</div>
                        <h3 class="feature-title">Lightning Fast</h3>
                        <p class="feature-description">Optimized performance with built-in ad and tracker blocking.</p>
                    </div>
                    <div class="feature">
                        <div class="feature-icon">üõ°Ô∏è</div>
                        <h3 class="feature-title">Advanced Protection</h3>
                        <p class="feature-description">Built-in security features Chrome can't match.</p>
                    </div>
                </div>
            </div>
        </div>
        <div class="browser">
            <div class="browser-header">
                <div class="window-controls">
                    <div class="control close"></div>
                    <div class="control minimize"></div>
                    <div class="control maximize"></div>
                </div>
                <div class="tab-bar">
                    <div class="tab" v-for="(tab, index) in tabs" :key="index" @click="switchTab(index)" :class="{ active: currentTabIndex === index }">
                        <span class="tab-favicon" v-html="tab.favicon"></span>
                        <span class="tab-title">{{ tab.title }}</span>
                        <span class="tab-close" @click.stop="closeTab(index)">√ó</span>
                        <div class="tab-hover-effect"></div>
                    </div>
                    <div class="new-tab-button" @click="addTab">+</div>
                </div>
            </div>
            <div class="browser-toolbar">
                <div class="navigation-buttons">
                    <button class="back-button" @click="goBack" :disabled="!canGoBack">
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path d="M20,11H7.83l5.59-5.59L12,4l-8,8l8,8l1.41-1.41L7.83,13H20V11z"/>
                        </svg>
                    </button>
                    <button class="forward-button" @click="goForward" :disabled="!canGoForward">
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path d="M12,4l-1.41,1.41L16.17,11H4v2h12.17l-5.58,5.59L12,20l8-8L12,4z"/>
                        </svg>
                    </button>
                    <button class="reload-button" @click="reloadPage">
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path d="M17.65,6.35C16.2,4.9,14.21,4,12,4c-4.42,0-7.99,8-7.99,8s3.57,8,7.99,8c3.73,0,6.84-2.55,7.73-6h-2.08c-0.82,2.33-3.04,4-5.65,4c-3.31,0-6-2.69-6-6s2.69-6,6-6c1.66,0,3.14,0.69,4.22,1.78L13,11h7V4L17.65,6.35z"/>
                        </svg>
                    </button>
                </div>
                <div class="url-bar">
                    <div class="security-icon">
                        <svg viewBox="0 0 24 24" width="16" height="16">
                            <path d="M18,8h-1V6c0-2.76-2.24-5-5-5S7,3.24,7,6v2H6c-1.1,0-2,0.9-2,2v10c0,1.1,0.9,2,2,2h12c1.1,0,2-0.9,2-2V10C20,8.9,19.1,8,18,8z M12,17c-1.1,0-2,0.9-2,2s0.9,2,2,2s2-0.9,2-2S13.1,17,12,17z M15.1,8H8.9V6c0-1.71,1.39-3.1,3.1-3.1c1.71,0,3.1,1.39,3.1,3.1V8z"/>
                        </svg>
                    </div>
                    <input 
                        type="text" 
                        v-model="currentUrl" 
                        @keyup.enter="navigate" 
                        class="url-input"
                        placeholder="Search or enter address">
                    <div class="bookmark-icon" @click="toggleBookmark" :class="{ 'bookmarked': isCurrentUrlBookmarked }">
                        <svg viewBox="0 0 24 24" width="16" height="16">
                            <path v-if="!isCurrentUrlBookmarked" d="M17,3H7C5.9,3,5,3.9,5,5v16l7-3l7,3V5C19,3.9,18.1,3,17,3z"/>
                            <path v-else d="M17,3H7C5.9,3,5,3.9,5,5v16l7-3l7,3V5C19,3.9,18.1,3,17,3z" fill="#0A84FF"/>
                        </svg>
                    </div>
                </div>
                <div class="browser-menu">
                    <button class="menu-button" @click="toggleMenu" :class="{ 'active': isMenuOpen }">
                        <svg viewBox="0 0 24 24" width="24" height="24">
                            <path d="M12,8c1.1,0,2-0.9,2-2s-0.9-2-2-2s-2,0.9-2,2S10.9,8,12,8z M12,10c-1.1,0-2,0.9-2,2s0.9,2,2,2s2-0.9,2-2S13.1,10,12,10z M12,16c-1.1,0-2,0.9-2,2s0.9,2,2,2s2-0.9,2-2S13.1,16,12,16z"/>
                        </svg>
                    </button>
                    
                    <!-- Add dropdown menu -->
                    <div v-if="isMenuOpen" class="browser-menu-dropdown" @click.stop>
                        <div class="menu-dropdown-section">
                            <div class="menu-dropdown-section-title">Privacy & Security</div>
                            <div class="menu-dropdown-item" @click="activateVPN">
                                <div class="menu-dropdown-item-icon" v-html="menuIcons.vpn"></div>
                                <div class="menu-dropdown-item-text">Activate VPN</div>
                            </div>
                            <div class="menu-dropdown-item" @click="blockAds">
                                <div class="menu-dropdown-item-icon" v-html="menuIcons.adBlock"></div>
                                <div class="menu-dropdown-item-text">Block Ads</div>
                            </div>
                        </div>
                        
                        <div class="menu-dropdown-section">
                            <div class="menu-dropdown-section-title">Achievements</div>
                            <div v-for="(achievement, key) in achievements" :key="key" class="achievement-item">
                                <div class="achievement-icon" v-html="menuIcons[key] || menuIcons.security"></div>
                                <div class="achievement-details">
                                    <div class="achievement-title">{{ achievement.title }}</div>
                                    <div class="achievement-progress">
                                        <div 
                                            class="achievement-progress-bar" 
                                            :style="{ 
                                                width: `${(achievement.progress / achievement.maxProgress) * 100}%`
                                            }"
                                        ></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="browser-content">
                <div v-if="loadingState.isLoading" class="loading-screen">
                    <div class="loading-content">
                        <svg class="loading-spinner" viewBox="0 0 50 50">
                            <circle cx="25" cy="25" r="20" fill="none" stroke="#0A84FF" stroke-width="4" />
                        </svg>
                        <div class="loading-progress">
                            <div class="loading-bar" :style="{ width: `${loadingState.progress}%` }"></div>
                        </div>
                        <p class="loading-message">{{ loadingState.message }}</p>
                    </div>
                </div>
                <div v-else-if="currentTab && !currentTab.url" class="new-tab-page">
                    <div class="search-container">
                        <div class="logo">
                            <svg width="80" height="80" viewBox="0 0 77.42 79.97">
                                <circle cx="39.9" cy="41" r="34.7" fill="#5B81A4"/>
                                <path d="M76.7,30.9c-1.8-4.2-5.5-8.7-8.4-10c1.3,2.5,2.2,5.2,2.7,7.2c-10.6-26.1-40.2-25.1-44.2-24.8C20.4,2,18.8,1.1,13.6,.3c-1.1,.4-2.3,.9-3.3,1.4C6.3,3.5,3.2,5.9,1.7,7.8c1.5-1.1,3.8-2.3,5.9-3c-12.6,10.5-7.5,42.4,16.2,50.3c23,8.3,45.9-3.5,48.9-21.4,0,0,.3-1.7,.3-1.9,0-8.8-7.2-16-16-8.6,0-15.7,6.9-16,15.5,0,0-.4-9.7,5.9-14.3,0,0-2.7-5.5-10.2-5.5-8.3,0-9.4,8.7-9.2,12.2v.2c.1,.8,.5,10.2,8.3,14.2,0,0-3.4,8.8-12.6,8.8-12.1-.1-11.8-11.3-11.8-11.3,0-1,.1-9.4,8.7-18.1,7.2-7.7,12.9-8.1,20.3-9.1,7.2-1,14.9-7.5,13.8-16.1,0,0,0,24.4,1,30.7,22.2,0,0-4.7-9.7-13.8-9.7,0,0,8.8,4.8,8.5,19.3-.1,5.7-2.6,11.1-6.8,14.8-5.9,5.2-11.2,5.4-13.7,5.4h-.9c-16.5,0-24.9-12.7-24.9-12.7,5.7,2.7,10.7,2.4,10.7,2.4-7.8-4.9-7.8-15.2-7.8-15.2-8.7,10,2.1,27,19.1,27h1.3c14.7-.6,24.4-12.3,25.9-25.5,0,0,2.6,7.5,.3,13.9,3.3-4.6,9.3-19.2,.2-31.3Z" fill="#FE8F25"/>
                                <path d="M39.9,.9C17.9,.9,0,18.8,0,40.8s17.9,39.2,39.9,39.2,37.5-17.1,37.5-39.2S61.9,.9,39.9,.9Zm0,74.7c-19.9,0-36.1-16.1-36.1-36.1S20,3.4,39.9,3.4s36.1,16.1,36.1,36.1-16.1,36.1-36.1,36.1Z" fill="#00539C"/>
                                <path d="M67.99,40.81c0,15.51-12.57,28.08-28.08,28.08s-28.08-12.57-28.08-28.08,12.57-28.08,28.08-28.08,28.08,12.57,28.08,28.08Z" fill="#0A84FF"/>
                                <path d="M39.9,8.92c-17.61,0-31.89,14.28-31.89,31.89s14.28,31.89,31.89,31.89,31.89-14.28,31.89-31.89-14.28-31.89-31.89-31.89Zm0,60.76c-15.94,0-28.87-12.93-28.87-28.87s12.93-28.87,28.87-28.87,28.87,12.93,28.87,28.87-12.93,28.87-28.87,28.87Z" fill="#00539C"/>
                                <path d="M39.9,10.92c-16.51,0-29.89,13.38-29.89,29.89s13.38,29.89,29.89,29.89,29.89-13.38,29.89-29.89-13.38-29.89-29.89-29.89Zm0,56.76c-14.83,0-26.87-12.04-26.87-26.87s12.04-26.87,26.87-26.87,26.87,12.04,26.87,26.87-12.04,26.87-26.87,26.87Z" fill="#2B88FF"/>
                            </svg>
                        </div>
                        <input 
                            type="text" 
                            class="search-input"
                            placeholder="Search with Bing"
                            v-model="searchQuery"
                            @keyup.enter="search">
                    </div>
                </div>
                <div v-else-if="currentTab && currentTab.useIframe" class="iframe-container">
                    <div class="x-frame-close" @click="currentTab.url = ''">‚úï</div>
                    <iframe 
                        :src="currentTab.url" 
                        sandbox="allow-same-origin allow-scripts allow-forms" 
                        referrerpolicy="no-referrer"
                        v-if="currentTab.url.startsWith('http://') || currentTab.url.startsWith('https://')">
                    </iframe>
                </div>
                <div v-else-if="currentTab && currentTab.url" class="simulated-content" :style="{ backgroundColor: currentTab.backgroundColor }">
                    <div class="simulated-header">
                        <h1>{{ currentTab.title }}</h1>
                        <p>{{ currentTab.content }}</p>
                        <p>This is a simulated version of {{ currentTab.url }}</p>
                    </div>
                </div>
            </div>
        </div>
        <!-- Custom Context Menu -->
        <div class="custom-context-menu" ref="contextMenu">
            <div class="context-menu-item" @click="openInspect">
                <div class="context-menu-item-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z"/>
                    </svg>
                </div>
                <div class="context-menu-item-text">Inspect</div>
            </div>
            <div class="context-menu-item" @click="readAloud">
                <div class="context-menu-item-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z"/>
                    </svg>
                </div>
                <div class="context-menu-item-text">Read Aloud</div>
            </div>
            <div class="context-menu-item" @click="printPage">
                <div class="context-menu-item-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
                        <path d="M19 8H5c-1.66 0-3 1.34-3 3v6h4v4h12v-4h4v-6c0-1.66-1.34-3-3-3zm-3 11H8v-5h8v5zm3-7c-.55 0-1-.45-1-1s.45-1 1-1 1 .45 1 1-.45 1-1 1zm-1-9H6v4h12V3z"/>
                    </svg>
                </div>
                <div class="context-menu-item-text">Print</div>
            </div>
        </div>
    </div>

    <script>
        document.addEventListener('contextmenu', function(e) {
            e.preventDefault();
            const app = document.getElementById('app');
            const vue = app.__vue_app__.component('root');
            if (vue) {
                vue.$.exposed.showContextMenu(e);
            }
        });

        document.addEventListener('click', function(event) {
            const app = document.getElementById('app');
            const vue = app.__vue_app__.component('root');
            if (vue) {
                if (vue.$.exposed.isMenuOpen.value) {
                    vue.$.exposed.closeMenu();
                }
                vue.$.exposed.hideContextMenu();
            }
        });
    </script>
</body>
</html>